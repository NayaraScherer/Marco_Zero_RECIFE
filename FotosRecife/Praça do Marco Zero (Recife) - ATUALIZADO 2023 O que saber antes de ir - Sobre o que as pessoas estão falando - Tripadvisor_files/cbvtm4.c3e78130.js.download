(this.$WP=this.$WP||[]).push(["cbvtm4",(e,r)=>{"use strict";var t,o,a,i,n,l,s,c,p,d,u,g,v,h,f,_,y,C,k,P,m,T,I,w,b,N,x,E,O,A,G,S,q=({onClose:e})=>{var{localize:r}=o();return i(t,{className:"wxIqd",children:i(a,{hidden:!0,isModalOnly:!0,onClose:e,highlightFirstResult:!0,closeOnResultClicked:!0,styleVariant:"box",searchMode:"GeoPicker",overlayVariant:"topCentered",scope:{geoId:1,linkType:"ATTRACTIONS"},source:"ExpCartIconPopover_ExploreNow_Geopicker",placeholderText:r.string("mobile_discovery_where_to")})})},z=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"AutoOpenedCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),M=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"UserClosedCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),R=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"ExploreNowClickCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),B={__key:0x9dad92733350,id:"9dad92733350792d6fda9af4d08cde62",loc:{},definitions:[]},D=(e,r,t)=>{var o,a,[{data:i,fetching:n}]=v({query:B,variables:{page:e||"",geoId:t},pause:r});return{url:(null==i||null==(o=i.routes)||null==(a=o[0])?void 0:a.url)||null,fetching:n}},U=({overrideTypography:e=!1,primaryButton:r=!1,hidePopover:t=(()=>{}),setGeoPickerOpened:a})=>{var{localize:n}=o(),l=g(),{page:v,params:h}=d(),f=u(),_="geoId"in h&&h.geoId||null,y=null==_||_<=1,{url:C}=O("Attractions",y,_),k=e=>{l({AppPresentation:R(f,v)}),t(),e.stopPropagation(),y&&(a(!0),e.preventDefault())},P=C||"/Attractions",m=n("TTD_Explore_Now");return r?i(s,{variant:"primary",onClick:k,size:"small",children:m}):e?i(p,{theme:"inline",role:y?"button":void 0,href:P,onClick:k,children:m}):i(c,{role:y?"button":void 0,href:P,onClick:k,children:m})},K=({isCartEmpty:e,hidePopover:r,setGeoPickerOpened:t})=>{var{localize:a}=o(),l=i(N,{variant:"title-04",marginBottom:"spacing-02",children:a(e?"TTD_Add_Things_To_Cart":"TTD_Book_More_Things")}),s=i(N,{variant:"body-01",children:a(e?"TTD_Empty_Cart_Popover_Message":"TTD_Product_Cart_Popover_Message")});return n("div",{className:b({margin:"spacing-04"}),"data-automation":"cartPopover",children:[l,s,i(A,{hidePopover:r,setGeoPickerOpened:t})]})},j="expCartPopoverInfo",L=({triggerRef:e,isCartEmpty:r})=>{var{page:t}=d(),o="MOBILE"===P(),a=g(),s=u(),c=m(),p=h(null),[v,b]=f(!1),[N,O]=f(!1),A=_((()=>{N&&(a({AppPresentation:M(s,t)}),O(!1))}),[N,a,s,t,O]);w("Escape",A);var q=C({experimentKeys:["ta_vi_pdp_click_off_test_1672849503"],skipImpression:!0}),R=null===q,B=null==q?void 0:q.ta_vi_pdp_click_off_test_1672849503,D=!!R||B&&"control"!==B;return y((()=>{var e=!o&&(e=>{var r=x.get(j);return!r||r.lastUserId!==e})(c);e&&!D&&(a({AppPresentation:z(s,t)}),(e=>{var r={lastUserId:e};x.set(j,r,S)})(c),O(!0))}),[D,o,a,t,s,O,c]),k("click",(e=>{var r;"click"===e.type&&e.target instanceof Node&&(null==(r=p.current)||!r.contains(e.target))&&A()}),void 0),e.current?n(l,{children:[N&&i(I,{children:i(T,{unstyled:!0,autoFocus:!0,position:"below",alignEdge:"right",arrowType:"small",showArrowWhenUnstyled:!0,target:e.current,children:i("div",{ref:p,className:"gUpLp f H e _V Ra Gi",children:i(G,{isCartEmpty:r,hidePopover:A,setGeoPickerOpened:b})})})}),v&&i(E,{onClose:()=>b(!1)})]}):(console.error("[ShoppingCart] no trigger ref for cart icon popover"),null)};return[()=>{O=D,G=K,S=432e6,e({ExploreNowCta:A=U,GeoPickerModal:E=q,default:L})},[e=>t=e.OverlayPortal,e=>o=e.useLocalize,e=>a=e.default,e=>(i=e.jsx,n=e.jsxs,l=e.Fragment),e=>(s=e.default,c=e.BorderlessButton),e=>p=e.default,e=>d=e.useRoute,e=>u=e.useSessionId,e=>g=e.useInteractionLogger,e=>v=e.useQuery,e=>(h=e.useRef,f=e.useState,_=e.useCallback,y=e.useEffect),e=>C=e.default,e=>k=e.useWindow,e=>P=e.useViewportCategory,e=>m=e.useUserId,e=>T=e.default,e=>I=e.AfterConsent,e=>w=e.useKeyboardEvent,e=>b=e.margin,e=>N=e.default,e=>x=e.default]]},["14euae","17thqz","11b5l5","121h32","jppfwt","lr6tb6","fgwvq1","1al4vi","32pwc7","1mqwhq","1o4yt4","gugp1d","ltllz9","1ys6v1","52far5","1x9dv9","1973cc","1gttbj","gw8uw6","1essqv","19b9b1"]]);
