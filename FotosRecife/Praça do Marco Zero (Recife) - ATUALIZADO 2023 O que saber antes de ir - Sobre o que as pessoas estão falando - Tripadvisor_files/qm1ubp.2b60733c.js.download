(this.$WP=this.$WP||[]).push(["qm1ubp",(e,s)=>{"use strict";var a,t,i,o,r,n,l,c,u,d,p,g,f,m,_,h,v,b,w,k,E,N,O,y,x,C,P,F,B,T,D,R,L=()=>{},q=({triggerNext:e,onPopupDismiss:s})=>{var[o,r]=a(!1),n=u(),l=c(),m=p(),h="MOBILE"===d(),v=e||L;return t((()=>{g(l)||m?s&&s():r(!0)}),[m,h,s,n,l]),o?_(i,{children:_(B,{triggerNext:v,servletName:n.page,onDismiss:()=>{s&&s(),f(l)},trackWouldOpenExplicitPreferences:L,openExplicitPreferences:L,explicitPreferencesEnabled:!1})}):null},z=({localize:e,viewportCategory:s,onDismiss:i,triggerNext:o,openExplicitPreferences:n,trackWouldOpenExplicitPreferences:l,explicitPreferencesEnabled:c,recordEvent:u,domainName:d,appIntegrationConfig:p,login:g})=>{var[f,m]=a(!1),[k,E]=a(!1),[y,x]=a(!1),C=r((()=>{y||x(!0)}),[y,x]),P=r((()=>{C(),u("facebook_onetap_closed"),i()}),[C,u,i]),F=r((()=>{m(!0),window.FB.Event.subscribe("xfbml.render",(()=>{u("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?E(!0):(x(!0),o())}))}),[o,u]),B=r((()=>{var{sdkUrl:e,appId:s,apiVersion:a}=p;if(e&&s&&a){var t=()=>{},i=new Promise((e=>{t=e}));!function(e,s,a){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:s,status:!0,cookie:!0}),a()}}(s,a,t),i.then(F)}else o()}),[F,p,o]);t((()=>{if(y)o();else{u("facebook_onetap_requested");var{sdkUrl:e}=p;O(e||"","MEMX"),B()}}),[B,u,o,y,p]);var[T,D]=a(!1);t((()=>{var e=setTimeout((()=>{T||f||o(),D(!0)}),5e3);return()=>clearTimeout(e)}),[o,T,f]);var R=r((e=>{if(!e)return null;var s=e.split(".",2)[1];if(s){var a=atob(s);try{return JSON.parse(a)}catch(e){u("facebook_onetap_parseSignedRequestFailed")}}return null}),[u]),L=r((e=>{var s=R(e);s&&s.code&&(v.set("FacebookAuthCode2",s.code,{expires:new Date((new Date).getTime()+5e3),domain:d,path:"/"}),g({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{P()},onSuccess:e=>{e&&e.userId&&(C(),e.hasCreatedMember&&(l&&l(),c&&n&&n()))}}))}),[g,C,l,P,d,c,n,R]),q=r((()=>{u("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:s}=e;s&&s.accessToken&&L(s.signedRequest)}}))}),[u,L]),z=y||!f||!k;if(t((()=>{if(z)return()=>{};var e=setTimeout((()=>{window.FB.XFBML.parse()}),50),s=()=>{q()};return window.FB.Event.subscribe("auth.authResponseChange",s),()=>{clearTimeout(e),window.FB.Event.unsubscribe("auth.authResponseChange",s)}}),[z,q]),z)return null;var A={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")},I="MOBILE"===s;return h("div",{className:b("oZwqD D Gi B1 Z BB","RoZcR"),style:{bottom:I?"0px":"unset"},children:[_(N,{onClick:P}),h("div",{className:"QGCww w z",children:[_("div",{className:"dpfbx Ci b f u",children:_("div",{children:A.headline})}),_("p",{className:"fFBkN Mc Nb MA NC",children:A.subhead}),_("div",{className:"ZOVpo w",children:_("div",{className:"w",children:_("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}})})}),_("div",{className:"YMLar Ci",children:_(w,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}})})]})]})},A={__key:0xb7c064a1dc73,id:"b7c064a1dc739c643393c7082b231ce7",loc:{},definitions:[]},I=({triggerNext:e,onPopupDismiss:s})=>{var{page:a}=u(),i=m.includes(a),{trackWouldOpenExplicitPreferences:o}=y("ONBOARDING","FB_ONETAP"),n=r((()=>{i&&o()}),[o,i]),l=()=>{},g=r((()=>{var a=e||l;s&&s(),a()}),[s,e]),{localize:h}=k(),v=P(),b=d(),w=x(),N=C(),O=r((e=>{N({module:"facebook_onetap",action:e,context:`${a||"unknown"}`})}),[a,N]),B=E(),T=c(),R=p(),[{data:L,fetching:q,error:z}]=F({query:A,variables:{locale:B},pause:!!R});return t((()=>{q||!z&&L&&L.Facebook_getFbConnectConfig||g()}),[q,z,L,g]),q||z||!L||!L.Facebook_getFbConnectConfig?null:_(D,{onDismiss:()=>{s&&s(),f(T)},triggerNext:g,trackWouldOpenExplicitPreferences:n,appIntegrationConfig:L.Facebook_getFbConnectConfig,localize:h,viewportCategory:b,recordEvent:O,domainName:w,login:v})},S=["UserReview","UserReviewEdit"],M=({dismiss:e})=>(t((()=>{n((()=>{null==e||e()}))}),[e]),null),G=()=>{var[e,s]=a(!1),[i,o]=a("GOOGLE_ONETAP"),n=c(),f=p(),{page:m,params:h}=u(),v="MOBILE"===d();t((()=>{S.includes(m)||g(n)||f?s(!0):e&&s(!1)}),[e,f,n,s,m,h,v]);var b=r((()=>{o("FACEBOOK_ONETAP")}),[o]),w=()=>null,k=w,E=[],N="registration_dialog";switch(i){case"GOOGLE_ONETAP":E=["google_one_tap"],k=({dismiss:e})=>_(T,{triggerNext:b,onPopupDismiss:()=>{e()}}),N="google_one_tap";break;case"FACEBOOK_ONETAP":E=["facebook_one_tap"],k=({dismiss:e})=>_(R,{onPopupDismiss:()=>{e()}}),N="facebook_one_tap"}return l({factory:w,eventTypes:[],key:"skip_marketing_interstitial",tier:50,skip:!0}),l({factory:e?({dismiss:e})=>_(M,{dismiss:e}):k,eventTypes:E,key:e?`skip_${N}`:N,tier:200}),null};return[()=>{B=o((()=>s("1j3bsm"))),T=q,D=z,R=I,e("default",G)},[e=>(a=e.useState,t=e.useEffect,i=e.Suspense,o=e.lazy,r=e.useCallback,n=e.startTransition),e=>l=e.usePopupHierarchyRender,e=>c=e.useSessionId,e=>u=e.useRoute,e=>d=e.useViewportCategory,e=>p=e.useUserId,e=>(g=e.shouldSuppressRegistrationDialog,f=e.setRegDialogDismissed,m=e.HOTEL_SERVLETS),e=>(_=e.jsx,h=e.jsxs),e=>v=e.default,e=>b=e.default,e=>(w=e.UnsafeLocalize,k=e.useLocalize,E=e.useLocale),e=>N=e.CloseIcon,e=>O=e.importScript,e=>y=e.default,e=>x=e.useDomainName,e=>C=e.useGARecorder,e=>P=e.default,e=>F=e.useQuery]]},["1o4yt4","1xo1is","1al4vi","fgwvq1","1ys6v1","52far5","cyrz7y","121h32","5gpqhx","fkji80","17thqz","1uzmmz","1q7wvk","dvdzap","qlcuu5","32pwc7","lchj5q","1mqwhq"]]);
